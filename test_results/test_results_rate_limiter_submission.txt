============================= test session starts =============================
platform win32 -- Python 3.9.7, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- C:\Users\abhir\anaconda3\python.exe
cachedir: .pytest_cache
rootdir: C:\Python\debug_problem, configfile: pytest.ini, testpaths: tests
plugins: anyio-3.6.2, dash-2.11.1
collecting ... collected 5 items

tests/test_rate_limiter.py::test_allows_up_to_limit FAILED               [ 20%]
tests/test_rate_limiter.py::test_separate_users PASSED                   [ 40%]
tests/test_rate_limiter.py::test_window_resets FAILED                    [ 60%]
tests/test_rate_limiter.py::test_old_requests_are_cleaned FAILED         [ 80%]
tests/test_rate_limiter.py::test_no_timestamps_added_on_reject FAILED    [100%]

================================== FAILURES ===================================
___________________________ test_allows_up_to_limit ___________________________

limiter = <src.rate_limiter.RateLimiter object at 0x000001BE18B61610>

    def test_allows_up_to_limit(limiter):
        user = 'alice'
        assert limiter.allow_request(user)
        assert limiter.allow_request(user)
        assert limiter.allow_request(user)
>       assert not limiter.allow_request(user)
E       AssertionError: assert not True
E        +  where True = <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18B61610>>('alice')
E        +    where <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18B61610>> = <src.rate_limiter.RateLimiter object at 0x000001BE18B61610>.allow_request

limiter    = <src.rate_limiter.RateLimiter object at 0x000001BE18B61610>
user       = 'alice'

tests\test_rate_limiter.py:15: AssertionError
_____________________________ test_window_resets ______________________________

limiter = <src.rate_limiter.RateLimiter object at 0x000001BE18C06D60>

    def test_window_resets(limiter):
        user = 'alice'
        for _ in range(3):
            assert limiter.allow_request(user)
>       assert not limiter.allow_request(user)
E       AssertionError: assert not True
E        +  where True = <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18C06D60>>('alice')
E        +    where <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18C06D60>> = <src.rate_limiter.RateLimiter object at 0x000001BE18C06D60>.allow_request

_          = 2
limiter    = <src.rate_limiter.RateLimiter object at 0x000001BE18C06D60>
user       = 'alice'

tests\test_rate_limiter.py:27: AssertionError
________________________ test_old_requests_are_cleaned ________________________

limiter = <src.rate_limiter.RateLimiter object at 0x000001BE18C2DB50>

    def test_old_requests_are_cleaned(limiter):
        user = 'alice'
        assert limiter.allow_request(user)
        time.sleep(1)
        assert limiter.allow_request(user)
        time.sleep(1.1)
        # The first request should now be out of window
        assert limiter.allow_request(user)
        assert limiter.allow_request(user)  # Should still allow up to limit
>       assert not limiter.allow_request(user)
E       AssertionError: assert not True
E        +  where True = <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18C2DB50>>('alice')
E        +    where <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18C2DB50>> = <src.rate_limiter.RateLimiter object at 0x000001BE18C2DB50>.allow_request

limiter    = <src.rate_limiter.RateLimiter object at 0x000001BE18C2DB50>
user       = 'alice'

tests\test_rate_limiter.py:40: AssertionError
_____________________ test_no_timestamps_added_on_reject ______________________

limiter = <src.rate_limiter.RateLimiter object at 0x000001BE18B61040>

    def test_no_timestamps_added_on_reject(limiter):
        user = 'alice'
        for _ in range(3):
            assert limiter.allow_request(user)
>       assert not limiter.allow_request(user)
E       AssertionError: assert not True
E        +  where True = <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18B61040>>('alice')
E        +    where <bound method RateLimiter.allow_request of <src.rate_limiter.RateLimiter object at 0x000001BE18B61040>> = <src.rate_limiter.RateLimiter object at 0x000001BE18B61040>.allow_request

_          = 2
limiter    = <src.rate_limiter.RateLimiter object at 0x000001BE18B61040>
user       = 'alice'

tests\test_rate_limiter.py:46: AssertionError
=========================== short test summary info ===========================
FAILED tests/test_rate_limiter.py::test_allows_up_to_limit - AssertionError: ...
FAILED tests/test_rate_limiter.py::test_window_resets - AssertionError: asser...
FAILED tests/test_rate_limiter.py::test_old_requests_are_cleaned - AssertionE...
FAILED tests/test_rate_limiter.py::test_no_timestamps_added_on_reject - Asser...
=================== 4 failed, 1 passed, 1 warning in 2.48s ====================
